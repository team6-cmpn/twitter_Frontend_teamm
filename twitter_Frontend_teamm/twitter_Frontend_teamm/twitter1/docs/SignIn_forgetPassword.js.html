<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: SignIn/forgetPassword.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: SignIn/forgetPassword.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import {
    useNavigate,Link
  } from "react-router-dom";
import React, {useState} from "react";
import './forgetPassword.css';
import "antd/dist/antd.css";
import { Modal, Input, Checkbox, Form  } from "antd";
import {TwitterOutlined} from '@ant-design/icons';
import {validatePassword} from '../SignUp/Validate'
import  * as BE  from '../SignUp/backEndRegistration';
/**
 *Forget Password
 * allows users to reset their passwords after verifying them
 * @returns Forgetpassword modal
 */
function ForgetPassword(){

    const history = useNavigate();
    const [isModalVisible, modelVisible] = useState(false);
    const [isModal2Visible, model2Visible] = useState(false);
    const [isModal3Visible, model3Visible] = useState(false);
    const [isModal4Visible, model4Visible] = useState(false);
    const [isModal5Visible, model5Visible] = useState(false);
    const [btnDisabled, setBtnDisabled] = useState(true);
    const [btn2Disabled, setBtn2Disabled] = useState(true);
    const [passwordError, setPasswordError] = useState('')
    const [confirmPasswordError, setConfirmPasswordError] = useState('')
    // const [data, setData] = useState(null);
    const [password, setPassword] = useState(null);
    const [confirmPassword, setConfirmPassword] = useState(null);
    const [userName, setUserName] = useState(null);
    const [email, setEmail] = useState(null);
    const [apiResponseMessage, setApiResponseMessage] = useState();
    const [resetPasswordMessage, setResetPasswordMessage] = useState();

    const buttonState = (changedValues, allValues) => {
      if ( allValues.next !== undefined &amp;&amp;  allValues.next !== '' &amp;&amp; allValues.next2 !== undefined &amp;&amp;  allValues.next2 !== ''  ) {
        setBtnDisabled(false);
      } 
      else{
        setBtnDisabled(true);
      }
    };
    const buttonState2 = (changedValues, allValues) => {
      if ( allValues.newpassword !== undefined &amp;&amp;  allValues.newpassword !== '' &amp;&amp;  allValues.confirmpassword !== ''
       &amp;&amp; allValues.confirmpassword !== undefined &amp;&amp; passwordError==='' &amp;&amp; confirmPasswordError==='' ) {
        setBtn2Disabled(false);
      } 
      else{
        setBtn2Disabled(true);
      }
    };

    const onSubModal = (e, stateSub = true, stateMain = false) => {
      modelVisible(stateMain);
      model2Visible(stateSub);
    };
    const onSubModal2 = (e, stateSub = true, stateMain = false) => {
      model2Visible(stateMain);
      model3Visible(stateSub);
    };
    const onSubModal3 = (e, stateSub = true, stateMain = false) => {
      model3Visible(stateMain);
      model4Visible(stateSub);
    };
    const onSubModal4 = (e, stateSub = true, stateMain = false) => {
      model4Visible(stateMain);
      model5Visible(stateSub);
    };
    function getUserName(val){
      setUserName(val.target.value)
    };
    function getEmail(val){
      setEmail(val.target.value)
    };
    function getPasswordValidation(val){
      setPasswordError(validatePassword(val.target.value))
    };
    
    function getConfirmPasswordValidation(val){
      setConfirmPasswordError(validatePassword(val.target.value))
      if(password!=val.target.value){
        setConfirmPasswordError('Passwords do not match')
      }
      else{
        setConfirmPasswordError('')
      }

    };
    function getPassword(val){
      setPassword(val.target.value)
    };

    function getConfirmPassword(val){
      setConfirmPassword(val.target.value)
    };
    
    var body={
      username:userName,
      email:email
    }

    var resetPasswordBody={
      password:password,
      confirmPassword:confirmPassword
    }

    function searchButtonAction(){
      const promise =  BE.forgetPassword(body);
      promise.then((message)=> {
        setApiResponseMessage(message)
        if(message===''){onSubModal();}
     })
    }

    function resetPasswordButtonAction(){
      const promise =  BE.resetPassword(resetPasswordBody);
      promise.then((message)=> {
        setResetPasswordMessage(message)
        if(message===''){onSubModal4();}
     })
    }

    return(


      &lt;div>
        &lt;Modal
          title={&lt;TwitterOutlined style={{ fontSize: '200%',marginTop:'1px',color:'Dodgerblue'}} />}
          style={{textAlign:"center"}}
          okText='Search'
          okButtonProps={{shape:'round' , disabled:btnDisabled,size:'large', style:{width: 450,fontWeight:'bold',alignItems:'center',justifyContent:'center',
          display:'flex',color:"white",backgroundColor:"black"}}}
          cancelButtonProps={{ style: { display: "none" } }}
          visible={modelVisible}
          bodyStyle={{height: 390 ,font:'Helvetica',textAlign:'left'}}
          width={500}
          centered={true}
          onCancel={() => history("/")}
          onOk={() => searchButtonAction()}
          maskClosable={false}      
        >
          &lt;span class='text3'>Find your Twitter Account&lt;/span>
          &lt;div >
            &lt;Form onValuesChange={buttonState}>
              &lt;Form.Item name='next'>
                &lt;Input id='forgetPassUserName' style={{width:450,marginLeft:5,marginTop:30,height:50}} onKeyUp={getUserName} placeholder="Enter your username">&lt;/Input>
              &lt;/Form.Item>
              &lt;Form.Item name='next2'>
                &lt;Input id='forgetPassEmail' style={{width:450,marginLeft:5,height:50}} onKeyUp={getEmail} placeholder="Enter your email ">&lt;/Input>
              &lt;/Form.Item>
            &lt;/Form>
            &lt;span style={{color: 'dodgerBlue',fontSize:'100',fontWeight:'bold'}}> {apiResponseMessage}&lt;/span> 
          &lt;/div>

        
        &lt;/Modal>
        &lt;Modal
          title={&lt;TwitterOutlined style={{ fontSize: '200%',marginTop:'1px',color:'Dodgerblue'}} />}
          style={{textAlign:"center"}}
          okText='Cancel'
          cancelText='Next'
          okButtonProps={{shape:'round' , size:'large', style:{border:'none',width: 450,fontWeight:'bold',alignItems:'center',justifyContent:'center',
          display:'flex',color:"black",backgroundColor:"white",marginLeft:2}}}
          cancelButtonProps={{shape:'round' , size:'large', style:{width: 450,fontWeight:'bold',alignItems:'center',justifyContent:'center',
          display:'flex',color:"white",backgroundColor:"black"}}}
          visible={isModal2Visible}
          bodyStyle={{height: 390 ,font:'Helvetica',textAlign:'left'}}
          width={500}
          centered={true}
          onCancel={() => onSubModal2()}
          onOk={() =>history("/")}
          maskClosable={false}
        >
          &lt;span class='text3'>How do you want to reset your password?&lt;/span>
    
          &lt;div >
            &lt;span>We found the following information associated with your account.&lt;/span>
            &lt;br>&lt;/br>
            &lt;span>Email a confirmation link to {email} &lt;/span>   
          &lt;/div>
        &lt;/Modal>
        &lt;Modal
          title={&lt;TwitterOutlined style={{ fontSize: '200%',marginTop:'1px',color:'Dodgerblue'}} />}
          style={{textAlign:"center"}}
          okText='Next'
          okButtonProps={{shape:'round' , size:'large', style:{border:'none',marginTop:30,textDecoration:'underline',width: 450,fontWeight:'bold',alignItems:'center',justifyContent:'center',
          display:'flex',color:"black",backgroundColor:"white"}}}
          cancelButtonProps={{ style: { display: "none" } }}
          visible={isModal3Visible}
          bodyStyle={{height: 400 ,font:'Helvetica',textAlign:'left'}}
          width={500}
          centered={true}
          onCancel={() => history("/")}
          onOk={() =>onSubModal3()}
          maskClosable={false}
        >
          &lt;span class='text3'>Check your email&lt;/span>
    
          &lt;div >
            &lt;span>You'll receive a link to verify here so you can reset your account password.&lt;/span>
            &lt;br>&lt;/br>
          &lt;/div>
        &lt;/Modal>
        &lt;Modal
    
          title={&lt;TwitterOutlined style={{ fontSize: '200%',marginTop:'1px',color:'Dodgerblue'}} />}
          style={{textAlign:"center"}}
          okText='Reset password'
          okButtonProps={{shape:'round' , size:'large',disabled:btn2Disabled, style:{border:'none',marginTop:30,width: 450,fontWeight:'bold',alignItems:'center',justifyContent:'center',
          display:'flex',color:"white",backgroundColor:"black"}}}
          cancelButtonProps={{ style: { display: "none" } }}
          visible={isModal4Visible}
          bodyStyle={{height: 400 ,font:'Helvetica',textAlign:'left'}}
          width={500}
          centered={true}
          onCancel={() => history("/")}
          onOk={() =>resetPasswordButtonAction()}
          maskClosable={false}
        >
          &lt;span class='text3'>Reset your password&lt;/span>
          &lt;div >
            &lt;span>Strong passwords include numbers, letters, and punctuation marks.
            Resetting your password will log you out of all your active Twitter sessions. &lt;/span>
            &lt;br>&lt;/br>
            &lt;div >
              &lt;Form onValuesChange={buttonState2}>
                &lt;Form.Item name="newpassword">
                  &lt;span style={{color: 'red'}}>
                    &lt;Input.Password id='newPass' style={{width:450,marginLeft:5,marginTop:30,height:50}} onChange={getPasswordValidation}   onKeyUp={getPassword} placeholder="Enter your new password">&lt;/Input.Password>
                    {passwordError}
                  &lt;/span>
                &lt;/Form.Item>
                &lt;Form.Item name="confirmpassword">
                  &lt;span style={{color: 'red'}}>
                    &lt;Input.Password id='confirmPass' style={{width:450,marginLeft:5,height:50}} onChange={getConfirmPasswordValidation}  onKeyUp={getConfirmPassword} placeholder="Enter your password one more time">&lt;/Input.Password>
                    {confirmPasswordError}
                  &lt;/span>
                &lt;/Form.Item>
              &lt;/Form>
              &lt;span style={{color: 'dodgerBlue',fontSize:'100',fontWeight:'bold'}}> {resetPasswordMessage}&lt;/span> 
            &lt;/div> 
          &lt;/div>
        &lt;/Modal>
        &lt;Modal
          title={&lt;TwitterOutlined style={{ fontSize: '200%',marginTop:'1px',color:'Dodgerblue'}} />}
          style={{textAlign:"center"}}
          visible={isModal5Visible}
          bodyStyle={{height: 450 ,font:'Helvetica',textAlign:'left'}}
          width={500}
          centered={true}
          onCancel={() =>history("/")}
          footer={null}
          maskClosable={false}
        >
          &lt;span class='text3'>You're all set. You've successfully changed your password.&lt;/span>
          &lt;div>
            &lt;Link id='resetDone' to='/home'>&lt;button className="Button">Continue to twitter&lt;/button>&lt;/Link>
          &lt;/div>
        &lt;/Modal>

      &lt;/div>


    );

}

export default ForgetPassword;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#ForgetPassword">ForgetPassword</a></li><li><a href="global.html#GoogleSignUp">GoogleSignUp</a></li><li><a href="global.html#LogIn">LogIn</a></li><li><a href="global.html#mock">mock</a></li><li><a href="global.html#Notifications">Notifications</a></li><li><a href="global.html#Post">Post</a></li><li><a href="global.html#Profile">Profile</a></li><li><a href="global.html#SignUp">SignUp</a></li><li><a href="global.html#StartPage">StartPage</a></li><li><a href="global.html#validateEmail">validateEmail</a></li><li><a href="global.html#validatePassword">validatePassword</a></li><li><a href="global.html#validateUserName">validateUserName</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.10</a> on Sat Apr 23 2022 17:57:13 GMT+0200 (Eastern European Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
